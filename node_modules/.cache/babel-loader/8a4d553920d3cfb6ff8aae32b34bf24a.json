{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar PopupWindow =\n/** @class */\nfunction () {\n  function PopupWindow(url, target, features, useOverlay, replace) {\n    this.id = \"id-\" + PopupWindow.uuidv4();\n    this.useOverlay = typeof useOverlay !== 'undefined' ? useOverlay : true;\n    this.win = window.open(url, target, features, replace);\n\n    if (this.win) {\n      this.setCloseInterval();\n    } else {\n      throw new Error('Something went wrong while trying to open the popup');\n    }\n\n    this.openOverlay();\n  }\n\n  PopupWindow.openNew = function (url, options) {\n    var mergedOptions = Object.assign({\n      title: 'Arkane Connect',\n      w: 350,\n      h: 685,\n      useOverlay: true\n    }, options);\n    var left = screen.width / 2 - mergedOptions.w / 2;\n    var top = screen.height / 2 - mergedOptions.h / 2;\n    var features = 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, ';\n    features += \"copyhistory=no, width=\" + mergedOptions.w + \", height=\" + mergedOptions.h + \", top=\" + top + \", left=\" + left;\n    return new PopupWindow(url, mergedOptions.title, features, mergedOptions.useOverlay);\n  };\n\n  PopupWindow.prototype.setCloseInterval = function () {\n    var _this = this;\n\n    this.interval = window.setInterval(function () {\n      if (!_this.win || _this.win.closed) {\n        _this.clearCloseInterval();\n\n        _this.close();\n      }\n    }, 100);\n  };\n\n  PopupWindow.prototype.clearCloseInterval = function () {\n    window.clearInterval(this.interval);\n  };\n\n  PopupWindow.prototype.close = function () {\n    if (this.win) {\n      this.win.close();\n      this.closeOverlay();\n    }\n  };\n\n  Object.defineProperty(PopupWindow.prototype, \"closed\", {\n    get: function () {\n      if (this.win) {\n        return this.win.closed;\n      } else {\n        return true;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  PopupWindow.prototype.focus = function () {\n    if (this.win) {\n      this.win.focus();\n    }\n  };\n\n  PopupWindow.prototype.postMessage = function (message, targetOrigin, transfer) {\n    if (this.win) {\n      this.win.postMessage(message, targetOrigin, transfer);\n    }\n  };\n\n  PopupWindow.prototype.closeOverlay = function () {\n    if (this.useOverlay) {\n      var overlay = document.querySelector(\"#\" + this.id);\n\n      if (overlay && overlay.parentNode) {\n        overlay.parentNode.removeChild(overlay);\n      }\n    }\n  };\n\n  PopupWindow.prototype.openOverlay = function () {\n    var _this = this;\n\n    if (this.useOverlay) {\n      //remove existing overlay divs\n      var overlayDiv = document.createElement('div');\n      overlayDiv.id = this.id;\n      overlayDiv.classList.add(PopupWindow.CONST.overlayClassName);\n      overlayDiv.style.zIndex = '2147483647';\n      overlayDiv.style.display = 'flex';\n      overlayDiv.style.alignItems = 'center';\n      overlayDiv.style.justifyContent = 'center';\n      overlayDiv.style.textAlign = 'center';\n      overlayDiv.style.position = 'fixed';\n      overlayDiv.style.left = '0px';\n      overlayDiv.style.right = '0px';\n      overlayDiv.style.top = '0px';\n      overlayDiv.style.bottom = '0px';\n      overlayDiv.style.background = 'rgba(0,0,0,0.80)';\n      overlayDiv.style.color = 'white';\n      overlayDiv.style.border = '2px solid #f1f1f1';\n      overlayDiv.innerHTML = \"<div style=\\\"max-width: 350px;\\\">\" + (\"<div style=\\\"margin-bottom: 1rem\\\">\" + PopupWindow.CONST.overlayMessage + \"</div>\") + (\"<div><a style=\\\"\" + PopupWindow.CONST.overlayLinkStyle + \"\\\" href=\\\"javascript:void(0)\\\" class=\\\"\" + PopupWindow.CONST.overlayLinkClassName + \"\\\">\" + PopupWindow.CONST.overlayLinkMessage + \"</a></div>\") + (\"<a style=\\\"\" + PopupWindow.CONST.overlayLinkStyle + \" position: absolute; right: 1rem; top: 1rem;\\\" href=\\\"javascript:void(0)\\\" class=\\\"\" + PopupWindow.CONST.overlayCloseLinkClassName + \"\\\">X</a>\") + \"</div>\";\n      var existingOverlays = document.getElementsByClassName(PopupWindow.CONST.overlayClassName);\n\n      for (var i = 0; i < existingOverlays.length; i++) {\n        var existingOverlay = existingOverlays.item(i);\n\n        if (existingOverlay) {\n          existingOverlay.remove();\n        }\n      }\n\n      document.body.appendChild(overlayDiv);\n      var link = overlayDiv.querySelector(\"#\" + this.id + \" .\" + PopupWindow.CONST.overlayLinkClassName);\n      var closeLink = overlayDiv.querySelector(\"#\" + this.id + \" .\" + PopupWindow.CONST.overlayCloseLinkClassName);\n\n      if (link) {\n        link.addEventListener('click', function () {\n          _this.focus();\n        });\n      }\n\n      if (closeLink) {\n        closeLink.addEventListener('click', function () {\n          _this.close();\n        });\n      }\n    }\n  };\n\n  PopupWindow.uuidv4 = function () {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0,\n          v = c == 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  };\n\n  PopupWindow.CONST = {\n    overlayClassName: 'arkane-connect__overlay',\n    overlayLinkClassName: 'arkane-connect__reopen-link',\n    overlayCloseLinkClassName: 'arkane-connect__close-link',\n    overlayMessage: 'Don’t see the popup? We’ll help you re-open the popup to complete your action.',\n    overlayLinkMessage: 'Click to continue',\n    overlayLinkStyle: 'color: white; text-decoration: underline; font-weight: bold;'\n  };\n  return PopupWindow;\n}();\n\nexports.PopupWindow = PopupWindow;","map":{"version":3,"sources":["../../../src/popup/PopupWindow.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PopupWindow = /** @class */ (function () {\n    function PopupWindow(url, target, features, useOverlay, replace) {\n        this.id = \"id-\" + PopupWindow.uuidv4();\n        this.useOverlay = typeof useOverlay !== 'undefined' ? useOverlay : true;\n        this.win = window.open(url, target, features, replace);\n        if (this.win) {\n            this.setCloseInterval();\n        }\n        else {\n            throw new Error('Something went wrong while trying to open the popup');\n        }\n        this.openOverlay();\n    }\n    PopupWindow.openNew = function (url, options) {\n        var mergedOptions = Object.assign({\n            title: 'Arkane Connect',\n            w: 350,\n            h: 685,\n            useOverlay: true\n        }, options);\n        var left = (screen.width / 2) - (mergedOptions.w / 2);\n        var top = (screen.height / 2) - (mergedOptions.h / 2);\n        var features = 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, ';\n        features += \"copyhistory=no, width=\" + mergedOptions.w + \", height=\" + mergedOptions.h + \", top=\" + top + \", left=\" + left;\n        return new PopupWindow(url, mergedOptions.title, features, mergedOptions.useOverlay);\n    };\n    PopupWindow.prototype.setCloseInterval = function () {\n        var _this = this;\n        this.interval = window.setInterval(function () {\n            if (!_this.win || _this.win.closed) {\n                _this.clearCloseInterval();\n                _this.close();\n            }\n        }, 100);\n    };\n    PopupWindow.prototype.clearCloseInterval = function () {\n        window.clearInterval(this.interval);\n    };\n    PopupWindow.prototype.close = function () {\n        if (this.win) {\n            this.win.close();\n            this.closeOverlay();\n        }\n    };\n    Object.defineProperty(PopupWindow.prototype, \"closed\", {\n        get: function () {\n            if (this.win) {\n                return this.win.closed;\n            }\n            else {\n                return true;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PopupWindow.prototype.focus = function () {\n        if (this.win) {\n            this.win.focus();\n        }\n    };\n    PopupWindow.prototype.postMessage = function (message, targetOrigin, transfer) {\n        if (this.win) {\n            this.win.postMessage(message, targetOrigin, transfer);\n        }\n    };\n    PopupWindow.prototype.closeOverlay = function () {\n        if (this.useOverlay) {\n            var overlay = document.querySelector(\"#\" + this.id);\n            if (overlay && overlay.parentNode) {\n                overlay.parentNode.removeChild(overlay);\n            }\n        }\n    };\n    PopupWindow.prototype.openOverlay = function () {\n        var _this = this;\n        if (this.useOverlay) {\n            //remove existing overlay divs\n            var overlayDiv = document.createElement('div');\n            overlayDiv.id = this.id;\n            overlayDiv.classList.add(PopupWindow.CONST.overlayClassName);\n            overlayDiv.style.zIndex = '2147483647';\n            overlayDiv.style.display = 'flex';\n            overlayDiv.style.alignItems = 'center';\n            overlayDiv.style.justifyContent = 'center';\n            overlayDiv.style.textAlign = 'center';\n            overlayDiv.style.position = 'fixed';\n            overlayDiv.style.left = '0px';\n            overlayDiv.style.right = '0px';\n            overlayDiv.style.top = '0px';\n            overlayDiv.style.bottom = '0px';\n            overlayDiv.style.background = 'rgba(0,0,0,0.80)';\n            overlayDiv.style.color = 'white';\n            overlayDiv.style.border = '2px solid #f1f1f1';\n            overlayDiv.innerHTML = \"<div style=\\\"max-width: 350px;\\\">\" +\n                (\"<div style=\\\"margin-bottom: 1rem\\\">\" + PopupWindow.CONST.overlayMessage + \"</div>\") +\n                (\"<div><a style=\\\"\" + PopupWindow.CONST.overlayLinkStyle + \"\\\" href=\\\"javascript:void(0)\\\" class=\\\"\" + PopupWindow.CONST.overlayLinkClassName + \"\\\">\" + PopupWindow.CONST.overlayLinkMessage + \"</a></div>\") +\n                (\"<a style=\\\"\" + PopupWindow.CONST.overlayLinkStyle + \" position: absolute; right: 1rem; top: 1rem;\\\" href=\\\"javascript:void(0)\\\" class=\\\"\" + PopupWindow.CONST.overlayCloseLinkClassName + \"\\\">X</a>\") +\n                \"</div>\";\n            var existingOverlays = document.getElementsByClassName(PopupWindow.CONST.overlayClassName);\n            for (var i = 0; i < existingOverlays.length; i++) {\n                var existingOverlay = existingOverlays.item(i);\n                if (existingOverlay) {\n                    existingOverlay.remove();\n                }\n            }\n            document.body.appendChild(overlayDiv);\n            var link = overlayDiv.querySelector(\"#\" + this.id + \" .\" + PopupWindow.CONST.overlayLinkClassName);\n            var closeLink = overlayDiv.querySelector(\"#\" + this.id + \" .\" + PopupWindow.CONST.overlayCloseLinkClassName);\n            if (link) {\n                link.addEventListener('click', function () {\n                    _this.focus();\n                });\n            }\n            if (closeLink) {\n                closeLink.addEventListener('click', function () {\n                    _this.close();\n                });\n            }\n        }\n    };\n    PopupWindow.uuidv4 = function () {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    };\n    PopupWindow.CONST = {\n        overlayClassName: 'arkane-connect__overlay',\n        overlayLinkClassName: 'arkane-connect__reopen-link',\n        overlayCloseLinkClassName: 'arkane-connect__close-link',\n        overlayMessage: 'Don’t see the popup? We’ll help you re-open the popup to complete your action.',\n        overlayLinkMessage: 'Click to continue',\n        overlayLinkStyle: 'color: white; text-decoration: underline; font-weight: bold;',\n    };\n    return PopupWindow;\n}());\nexports.PopupWindow = PopupWindow;\n//# sourceMappingURL=PopupWindow.js.map"]},"metadata":{},"sourceType":"script"}