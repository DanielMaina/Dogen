{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar env_1 = tslib_1.__importDefault(require(\"../env\"));\n\nvar QueryString = tslib_1.__importStar(require(\"querystring\"));\n\nvar Utils =\n/** @class */\nfunction () {\n  function Utils() {}\n\n  Object.defineProperty(Utils, \"rawEnvironment\", {\n    get: function () {\n      return Utils.rawEnvironmentHolder;\n    },\n    set: function (env) {\n      Utils.rawEnvironmentHolder = env;\n      var split = env.split('-');\n      Utils.environment = split[0];\n      Utils.connectEnvironment = split.length > 1 && split[1] || '';\n    },\n    enumerable: true,\n    configurable: true\n  });\n  ;\n  Object.defineProperty(Utils, \"env\", {\n    get: function () {\n      return env_1.default;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Utils.environments = function () {\n    return {\n      'qa2': {\n        api: 'https://api-qa.arkane.network/api',\n        connect: 'https://connect-qa2.arkane.network',\n        login: 'https://login-qa.arkane.network/auth'\n      }\n    };\n  };\n\n  Object.defineProperty(Utils, \"urls\", {\n    get: function () {\n      var postfix = '';\n\n      switch (Utils.environment) {\n        case 'local':\n          postfix = 'tst1';\n          break;\n\n        case 'prod':\n        case 'production':\n          postfix = '';\n          break;\n\n        default:\n          postfix = Utils.environment;\n      }\n\n      var environment = this.environments()[postfix];\n\n      if (environment) {\n        return {\n          api: environment.api,\n          connect: Utils.environment === 'local' || Utils.connectEnvironment === 'local' ? 'http://127.0.0.1:8181' : environment.connect,\n          login: environment.login\n        };\n      } else {\n        return {\n          api: Utils.environment === 'local' ? 'http://127.0.0.1:8581/api' : \"https://api\" + (postfix ? '-' + postfix : '') + \".arkane.network/api\",\n          connect: Utils.environment === 'local' || Utils.connectEnvironment === 'local' ? 'http://127.0.0.1:8181' : \"https://connect\" + (postfix ? '-' + postfix : '') + \".arkane.network\",\n          login: \"https://login\" + (postfix ? '-' + postfix : '') + \".arkane.network/auth\"\n        };\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Utils.removeNulls = function (obj) {\n    return Object.keys(obj).filter(function (key) {\n      return obj[key] !== null && obj[key] !== undefined;\n    }) // Remove undef. and null.\n    .reduce(function (newObj, key) {\n      var _a, _b;\n\n      if (typeof obj[key] === 'object' && !Array.isArray(obj[key])) {\n        return Object.assign(newObj, (_a = {}, _a[key] = Utils.removeNulls(obj[key]), _a));\n      } else {\n        return Object.assign(newObj, (_b = {}, _b[key] = obj[key], _b));\n      }\n    }, {});\n  };\n\n  Utils.removeNullsAndEmpty = function (obj) {\n    return Object.keys(obj).filter(function (key) {\n      return obj[key] !== null && obj[key] !== undefined && obj[key] !== '';\n    }) // Remove undef. and null.\n    .reduce(function (newObj, key) {\n      var _a, _b;\n\n      if (typeof obj[key] === 'object' && !Array.isArray(obj[key])) {\n        return Object.assign(newObj, (_a = {}, _a[key] = Utils.removeNullsAndEmpty(obj[key]), _a));\n      } else {\n        return Object.assign(newObj, (_b = {}, _b[key] = obj[key], _b));\n      }\n    }, {});\n  };\n\n  Utils.messages = function () {\n    return {\n      hasValidOrigin: function (message) {\n        return message.origin === Utils.urls.connect;\n      },\n      hasType: function (message) {\n        return message.data && message.data.type && message.data.type !== '';\n      },\n      isOfType: function (message, eventType) {\n        return Utils.messages().hasType(message) && message.data.type === eventType.toString();\n      },\n      hasCorrectCorrelationID: function (message, correlationID) {\n        return message.data && message.data.correlationID === correlationID;\n      }\n    };\n  };\n\n  Utils.formatNumber = function (value, minDecimals, maxDecimals) {\n    if (minDecimals === void 0) {\n      minDecimals = 2;\n    }\n\n    if (maxDecimals === void 0) {\n      maxDecimals = minDecimals;\n    }\n\n    return new Intl.NumberFormat('en-US', {\n      minimumFractionDigits: minDecimals,\n      maximumFractionDigits: maxDecimals\n    }).format(value);\n  };\n\n  Utils.rawValue = function () {\n    return {\n      toTokenValue: function (rawValue, decimals) {\n        return rawValue / Math.pow(10, decimals);\n      },\n      toGwei: function (rawValue) {\n        return rawValue / Math.pow(10, 9);\n      }\n    };\n  };\n\n  Utils.gwei = function () {\n    return {\n      toRawValue: function (rawValue) {\n        return rawValue * Math.pow(10, 9);\n      }\n    };\n  };\n\n  Utils.openExternalUrl = function (url, targetBlank) {\n    if (targetBlank === void 0) {\n      targetBlank = true;\n    }\n\n    if (targetBlank) {\n      var newWindow = window.open('', '_blank');\n\n      if (newWindow) {\n        newWindow.opener = null;\n        newWindow.location.assign(url);\n      }\n\n      return newWindow;\n    } else {\n      window.location.href = url;\n      return window;\n    }\n  };\n\n  Utils.zeroIfUndefined = function (numberToVerify) {\n    return numberToVerify ? numberToVerify : 0;\n  };\n\n  Utils.defaultRedirectUriIfNotPresent = function (options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!options.redirectUri) {\n      options.redirectUri = window.location.href;\n    }\n\n    return options;\n  };\n\n  Utils.http = function () {\n    return {\n      postInForm: function (to, request, bearerTokenProvider, options) {\n        options = Utils.defaultRedirectUriIfNotPresent(options);\n        var form = document.createElement('form');\n        form.action = Utils.http().buildUrl(to, options);\n        form.method = 'POST';\n        var inputBearer = document.createElement('input');\n        inputBearer.type = 'hidden';\n        inputBearer.name = 'bearerToken';\n        inputBearer.value = bearerTokenProvider();\n        form.appendChild(inputBearer);\n        var inputData = document.createElement('input');\n        inputData.type = 'hidden';\n        inputData.name = 'data';\n        inputData.value = JSON.stringify(tslib_1.__assign({}, request));\n        form.appendChild(inputData);\n        document.body.appendChild(form);\n        form.submit();\n      },\n      buildUrl: function (to, options) {\n        if (options && (options.redirectUri || options.correlationID)) {\n          var params = {};\n\n          if (options.redirectUri) {\n            params.redirectUri = options.redirectUri;\n          }\n\n          if (options.correlationID) {\n            params.cid = options.correlationID;\n          }\n\n          return Utils.http().addRequestParams(to, params);\n        }\n\n        return to;\n      },\n      addRequestParams: function (url, params) {\n        if (url && params) {\n          var paramsAsString = QueryString.stringify(params);\n\n          if (url && url.indexOf('?') > 0) {\n            return url + \"&\" + paramsAsString;\n          } else {\n            return url + \"?\" + paramsAsString;\n          }\n        }\n\n        return url;\n      }\n    };\n  };\n\n  Utils.rawEnvironmentHolder = '';\n  Utils.environment = '';\n  Utils.connectEnvironment = '';\n  return Utils;\n}();\n\nexports.default = Utils;","map":{"version":3,"sources":["../../../src/utils/Utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar env_1 = tslib_1.__importDefault(require(\"../env\"));\nvar QueryString = tslib_1.__importStar(require(\"querystring\"));\nvar Utils = /** @class */ (function () {\n    function Utils() {\n    }\n    Object.defineProperty(Utils, \"rawEnvironment\", {\n        get: function () {\n            return Utils.rawEnvironmentHolder;\n        },\n        set: function (env) {\n            Utils.rawEnvironmentHolder = env;\n            var split = env.split('-');\n            Utils.environment = split[0];\n            Utils.connectEnvironment = split.length > 1 && split[1] || '';\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    Object.defineProperty(Utils, \"env\", {\n        get: function () {\n            return env_1.default;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Utils.environments = function () {\n        return {\n            'qa2': {\n                api: 'https://api-qa.arkane.network/api',\n                connect: 'https://connect-qa2.arkane.network',\n                login: 'https://login-qa.arkane.network/auth',\n            }\n        };\n    };\n    Object.defineProperty(Utils, \"urls\", {\n        get: function () {\n            var postfix = '';\n            switch (Utils.environment) {\n                case 'local':\n                    postfix = 'tst1';\n                    break;\n                case 'prod':\n                case 'production':\n                    postfix = '';\n                    break;\n                default:\n                    postfix = Utils.environment;\n            }\n            var environment = this.environments()[postfix];\n            if (environment) {\n                return {\n                    api: environment.api,\n                    connect: Utils.environment === 'local' || Utils.connectEnvironment === 'local' ? 'http://127.0.0.1:8181' : environment.connect,\n                    login: environment.login,\n                };\n            }\n            else {\n                return {\n                    api: Utils.environment === 'local' ? 'http://127.0.0.1:8581/api' : \"https://api\" + (postfix ? '-' + postfix : '') + \".arkane.network/api\",\n                    connect: Utils.environment === 'local' || Utils.connectEnvironment === 'local' ? 'http://127.0.0.1:8181' : \"https://connect\" + (postfix ? '-' + postfix : '') + \".arkane.network\",\n                    login: \"https://login\" + (postfix ? '-' + postfix : '') + \".arkane.network/auth\",\n                };\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Utils.removeNulls = function (obj) {\n        return Object.keys(obj)\n            .filter(function (key) { return obj[key] !== null && obj[key] !== undefined; }) // Remove undef. and null.\n            .reduce(function (newObj, key) {\n            var _a, _b;\n            if (typeof obj[key] === 'object' && !Array.isArray(obj[key])) {\n                return Object.assign(newObj, (_a = {}, _a[key] = Utils.removeNulls(obj[key]), _a));\n            }\n            else {\n                return Object.assign(newObj, (_b = {}, _b[key] = obj[key], _b));\n            }\n        }, {});\n    };\n    Utils.removeNullsAndEmpty = function (obj) {\n        return Object.keys(obj)\n            .filter(function (key) { return obj[key] !== null && obj[key] !== undefined && obj[key] !== ''; }) // Remove undef. and null.\n            .reduce(function (newObj, key) {\n            var _a, _b;\n            if (typeof obj[key] === 'object' && !Array.isArray(obj[key])) {\n                return Object.assign(newObj, (_a = {}, _a[key] = Utils.removeNullsAndEmpty(obj[key]), _a));\n            }\n            else {\n                return Object.assign(newObj, (_b = {}, _b[key] = obj[key], _b));\n            }\n        }, {});\n    };\n    Utils.messages = function () {\n        return {\n            hasValidOrigin: function (message) {\n                return message.origin === Utils.urls.connect;\n            },\n            hasType: function (message) {\n                return message.data && message.data.type && message.data.type !== '';\n            },\n            isOfType: function (message, eventType) {\n                return Utils.messages().hasType(message) && message.data.type === eventType.toString();\n            },\n            hasCorrectCorrelationID: function (message, correlationID) {\n                return message.data && message.data.correlationID === correlationID;\n            }\n        };\n    };\n    Utils.formatNumber = function (value, minDecimals, maxDecimals) {\n        if (minDecimals === void 0) { minDecimals = 2; }\n        if (maxDecimals === void 0) { maxDecimals = minDecimals; }\n        return new Intl.NumberFormat('en-US', {\n            minimumFractionDigits: minDecimals,\n            maximumFractionDigits: maxDecimals,\n        }).format(value);\n    };\n    Utils.rawValue = function () {\n        return {\n            toTokenValue: function (rawValue, decimals) { return rawValue / Math.pow(10, decimals); },\n            toGwei: function (rawValue) { return rawValue / Math.pow(10, 9); },\n        };\n    };\n    Utils.gwei = function () {\n        return {\n            toRawValue: function (rawValue) { return rawValue * Math.pow(10, 9); },\n        };\n    };\n    Utils.openExternalUrl = function (url, targetBlank) {\n        if (targetBlank === void 0) { targetBlank = true; }\n        if (targetBlank) {\n            var newWindow = window.open('', '_blank');\n            if (newWindow) {\n                newWindow.opener = null;\n                newWindow.location.assign(url);\n            }\n            return newWindow;\n        }\n        else {\n            window.location.href = url;\n            return window;\n        }\n    };\n    Utils.zeroIfUndefined = function (numberToVerify) {\n        return numberToVerify ? numberToVerify : 0;\n    };\n    Utils.defaultRedirectUriIfNotPresent = function (options) {\n        if (options === void 0) { options = {}; }\n        if (!options.redirectUri) {\n            options.redirectUri = window.location.href;\n        }\n        return options;\n    };\n    Utils.http = function () {\n        return {\n            postInForm: function (to, request, bearerTokenProvider, options) {\n                options = Utils.defaultRedirectUriIfNotPresent(options);\n                var form = document.createElement('form');\n                form.action = Utils.http().buildUrl(to, options);\n                form.method = 'POST';\n                var inputBearer = document.createElement('input');\n                inputBearer.type = 'hidden';\n                inputBearer.name = 'bearerToken';\n                inputBearer.value = bearerTokenProvider();\n                form.appendChild(inputBearer);\n                var inputData = document.createElement('input');\n                inputData.type = 'hidden';\n                inputData.name = 'data';\n                inputData.value = JSON.stringify(tslib_1.__assign({}, request));\n                form.appendChild(inputData);\n                document.body.appendChild(form);\n                form.submit();\n            },\n            buildUrl: function (to, options) {\n                if (options && (options.redirectUri || options.correlationID)) {\n                    var params = {};\n                    if (options.redirectUri) {\n                        params.redirectUri = options.redirectUri;\n                    }\n                    if (options.correlationID) {\n                        params.cid = options.correlationID;\n                    }\n                    return Utils.http().addRequestParams(to, params);\n                }\n                return to;\n            },\n            addRequestParams: function (url, params) {\n                if (url && params) {\n                    var paramsAsString = QueryString.stringify(params);\n                    if (url && url.indexOf('?') > 0) {\n                        return url + \"&\" + paramsAsString;\n                    }\n                    else {\n                        return url + \"?\" + paramsAsString;\n                    }\n                }\n                return url;\n            }\n        };\n    };\n    Utils.rawEnvironmentHolder = '';\n    Utils.environment = '';\n    Utils.connectEnvironment = '';\n    return Utils;\n}());\nexports.default = Utils;\n//# sourceMappingURL=Utils.js.map"]},"metadata":{},"sourceType":"script"}