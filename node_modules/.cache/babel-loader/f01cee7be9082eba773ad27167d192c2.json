{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar axios_1 = tslib_1.__importDefault(require(\"axios\"));\n\nvar Utils_1 = tslib_1.__importDefault(require(\"../utils/Utils\"));\n\nvar Api =\n/** @class */\nfunction () {\n  function Api(baseURL, tokenProvider) {\n    var _this = this; ////////////\n    // Chains //\n    ////////////\n\n\n    this.getAvailableSecretTypes = function () {\n      return _this.processResponse(_this.http.get(\"chains\"));\n    }; ////////////\n    // Wallet //\n    ////////////\n\n\n    this.getWallets = function (params) {\n      params = params && Utils_1.default.removeNulls(params) || {};\n      return _this.processResponse(_this.http.get('wallets', {\n        params: params\n      }));\n    };\n\n    this.getWallet = function (walletId) {\n      return _this.processResponse(_this.http.get(\"wallets/\" + walletId));\n    };\n\n    this.getBalance = function (walletId) {\n      return _this.processResponse(_this.http.get(\"wallets/\" + walletId + \"/balance\"));\n    };\n\n    this.getTokenBalances = function (walletId) {\n      return _this.processResponse(_this.http.get(\"wallets/\" + walletId + \"/balance/tokens\"));\n    };\n\n    this.getTokenBalance = function (walletId, tokenAddress) {\n      return _this.processResponse(_this.http.get(\"wallets/\" + walletId + \"/balance/tokens/\" + tokenAddress));\n    };\n\n    this.getNonfungibles = function (walletId) {\n      return _this.processResponse(_this.http.get(\"wallets/\" + walletId + \"/nonfungibles\"));\n    };\n\n    this.getNonfungiblesByAddress = function (secretType, walletAddress) {\n      return _this.processResponse(_this.http.get(\"wallets/\" + secretType + \"/\" + walletAddress + \"/nonfungibles\"));\n    };\n\n    this.getAllNonfungibles = function (secretTypes) {\n      var queryParams = secretTypes && secretTypes.length > 0 ? \"?\" + secretTypes.map(function (st) {\n        return \"secretType=\" + st;\n      }).join(\"&\") : \"\";\n      return _this.processResponse(_this.http.get(\"wallets/nonfungibles\" + queryParams));\n    };\n\n    this.unlink = function (walletId) {\n      return _this.processResponse(_this.http.delete(\"wallets/\" + walletId + \"/link\"));\n    }; /////////////\n    // Profile //\n    /////////////\n\n\n    this.getProfile = function () {\n      return _this.processResponse(_this.http.get('profile'));\n    }; //////////////////\n    // Transactions //\n    //////////////////\n\n\n    this.getPendingTransactions = function () {\n      return _this.processResponse(_this.http.get('transactions'));\n    };\n\n    this.deleteTransaction = function (transactionId) {\n      return _this.processResponse(_this.http.delete(\"transactions/\" + transactionId));\n    };\n\n    this.getTransactionStatus = function (transactionHash, secretType) {\n      return _this.processResponse(_this.http.get(\"transactions/\" + secretType + \"/\" + transactionHash + \"/status\"));\n    };\n\n    this.http = axios_1.default.create({\n      baseURL: baseURL.endsWith('/') ? baseURL.substring(0, baseURL.length - 1) : baseURL\n    });\n\n    if (tokenProvider) {\n      this.http.interceptors.request.use(function (config) {\n        var bearerToken = tokenProvider();\n\n        if (!bearerToken) {\n          throw new Error('Not authenticated');\n        }\n\n        config.headers.common = {\n          Authorization: 'Bearer ' + bearerToken\n        };\n        return config;\n      });\n    }\n  }\n\n  Api.prototype.processResponse = function (axiosPromise) {\n    return new Promise(function (resolve, reject) {\n      axiosPromise.then(function (axiosRes) {\n        if (axiosRes.data.success) {\n          if (axiosRes.data.result) {\n            resolve(axiosRes.data.result);\n          } else {\n            resolve();\n          }\n        } else {\n          reject(axiosRes.data.errors);\n        }\n      }).catch(function (error) {\n        if (error.response && error.response.data) {\n          reject(error.response.data.errors);\n        } else if (error.message) {\n          var code = error.message.indexOf('authenticat') >= 0 ? 'auth.error' : 'unknown.error';\n          reject([{\n            code: code,\n            message: error.message\n          }]);\n        } else {\n          reject([{\n            code: 'unknown.error',\n            message: 'An unknown error occured'\n          }]);\n        }\n      });\n    });\n  };\n\n  return Api;\n}();\n\nexports.Api = Api;","map":{"version":3,"sources":["../../../src/api/Api.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar axios_1 = tslib_1.__importDefault(require(\"axios\"));\nvar Utils_1 = tslib_1.__importDefault(require(\"../utils/Utils\"));\nvar Api = /** @class */ (function () {\n    function Api(baseURL, tokenProvider) {\n        var _this = this;\n        ////////////\n        // Chains //\n        ////////////\n        this.getAvailableSecretTypes = function () {\n            return _this.processResponse(_this.http.get(\"chains\"));\n        };\n        ////////////\n        // Wallet //\n        ////////////\n        this.getWallets = function (params) {\n            params = (params && Utils_1.default.removeNulls(params)) || {};\n            return _this.processResponse(_this.http.get('wallets', { params: params }));\n        };\n        this.getWallet = function (walletId) {\n            return _this.processResponse(_this.http.get(\"wallets/\" + walletId));\n        };\n        this.getBalance = function (walletId) {\n            return _this.processResponse(_this.http.get(\"wallets/\" + walletId + \"/balance\"));\n        };\n        this.getTokenBalances = function (walletId) {\n            return _this.processResponse(_this.http.get(\"wallets/\" + walletId + \"/balance/tokens\"));\n        };\n        this.getTokenBalance = function (walletId, tokenAddress) {\n            return _this.processResponse(_this.http.get(\"wallets/\" + walletId + \"/balance/tokens/\" + tokenAddress));\n        };\n        this.getNonfungibles = function (walletId) {\n            return _this.processResponse(_this.http.get(\"wallets/\" + walletId + \"/nonfungibles\"));\n        };\n        this.getNonfungiblesByAddress = function (secretType, walletAddress) {\n            return _this.processResponse(_this.http.get(\"wallets/\" + secretType + \"/\" + walletAddress + \"/nonfungibles\"));\n        };\n        this.getAllNonfungibles = function (secretTypes) {\n            var queryParams = secretTypes && secretTypes.length > 0\n                ? \"?\" + secretTypes.map(function (st) { return \"secretType=\" + st; }).join(\"&\")\n                : \"\";\n            return _this.processResponse(_this.http.get(\"wallets/nonfungibles\" + queryParams));\n        };\n        this.unlink = function (walletId) {\n            return _this.processResponse(_this.http.delete(\"wallets/\" + walletId + \"/link\"));\n        };\n        /////////////\n        // Profile //\n        /////////////\n        this.getProfile = function () {\n            return _this.processResponse(_this.http.get('profile'));\n        };\n        //////////////////\n        // Transactions //\n        //////////////////\n        this.getPendingTransactions = function () {\n            return _this.processResponse(_this.http.get('transactions'));\n        };\n        this.deleteTransaction = function (transactionId) {\n            return _this.processResponse(_this.http.delete(\"transactions/\" + transactionId));\n        };\n        this.getTransactionStatus = function (transactionHash, secretType) {\n            return _this.processResponse(_this.http.get(\"transactions/\" + secretType + \"/\" + transactionHash + \"/status\"));\n        };\n        this.http = axios_1.default.create({\n            baseURL: baseURL.endsWith('/') ? baseURL.substring(0, baseURL.length - 1) : baseURL,\n        });\n        if (tokenProvider) {\n            this.http.interceptors.request.use(function (config) {\n                var bearerToken = tokenProvider();\n                if (!bearerToken) {\n                    throw new Error('Not authenticated');\n                }\n                config.headers.common = { Authorization: 'Bearer ' + bearerToken };\n                return config;\n            });\n        }\n    }\n    Api.prototype.processResponse = function (axiosPromise) {\n        return new Promise(function (resolve, reject) {\n            axiosPromise.then(function (axiosRes) {\n                if (axiosRes.data.success) {\n                    if (axiosRes.data.result) {\n                        resolve(axiosRes.data.result);\n                    }\n                    else {\n                        resolve();\n                    }\n                }\n                else {\n                    reject(axiosRes.data.errors);\n                }\n            })\n                .catch(function (error) {\n                if (error.response && error.response.data) {\n                    reject(error.response.data.errors);\n                }\n                else if (error.message) {\n                    var code = error.message.indexOf('authenticat') >= 0 ? 'auth.error' : 'unknown.error';\n                    reject([{ code: code, message: error.message }]);\n                }\n                else {\n                    reject([{ code: 'unknown.error', message: 'An unknown error occured' }]);\n                }\n            });\n        });\n    };\n    return Api;\n}());\nexports.Api = Api;\n//# sourceMappingURL=Api.js.map"]},"metadata":{},"sourceType":"script"}